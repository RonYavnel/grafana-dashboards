{"meta":{"type":"db","canSave":false,"canEdit":false,"canAdmin":false,"canStar":true,"canDelete":false,"slug":"cluster-level-table","url":"/d/afcbkkm8urny8e/cluster-level-table","expires":"0001-01-01T00:00:00Z","created":"2026-02-05T11:36:50Z","updated":"2026-02-18T09:51:34Z","updatedBy":"admin","createdBy":"admin","version":61,"hasAcl":false,"isFolder":false,"folderId":17,"folderUid":"ffaxpra6t4d1cb","folderTitle":"Ron","folderUrl":"/dashboards/f/ffaxpra6t4d1cb/ron","provisioned":false,"provisionedExternalId":"","annotationsPermissions":{"dashboard":{"canAdd":false,"canEdit":false,"canDelete":false},"organization":{"canAdd":false,"canEdit":false,"canDelete":false}}},"dashboard":{"annotations":{"list":[{"builtIn":1,"datasource":{"type":"grafana","uid":"-- Grafana --"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","type":"dashboard"}]},"editable":true,"fiscalYearStartMonth":0,"graphTooltip":0,"id":21,"links":[],"panels":[{"datasource":{"type":"prometheus","uid":"ff7s7z4vpjmyoa"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"left","cellOptions":{"type":"auto"},"inspect":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]}},"overrides":[{"matcher":{"id":"byName","options":"CPU Utilization (%)"},"properties":[{"id":"unit","value":"percent"},{"id":"min","value":0},{"id":"max","value":100},{"id":"custom.cellOptions","value":{"mode":"lcd","type":"gauge","valueDisplayMode":"color"}},{"id":"thresholds","value":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"#EAB839","value":65},{"color":"orange","value":75},{"color":"red","value":85}]}}]},{"matcher":{"id":"byName","options":"RAM Utilization (%)"},"properties":[{"id":"unit","value":"percent"},{"id":"min","value":0},{"id":"max","value":100},{"id":"custom.cellOptions","value":{"mode":"lcd","type":"gauge","valueDisplayMode":"color"}},{"id":"thresholds","value":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"#EAB839","value":65},{"color":"orange","value":75},{"color":"red","value":85}]}}]},{"matcher":{"id":"byName","options":"Hostname"},"properties":[{"id":"links","value":[{"targetBlank":true,"title":"Open server dashboard","url":"https://igum-zabbix.ece.technion.ac.il:3000/d/bfbc1b6obigowf/server-level-graphs?orgId=1\r\n\u0026from=now-5m\r\n\u0026to=now\r\n\u0026timezone=browser\r\n\u0026var-Group=${Group}\r\n\u0026var-Node=${__value.text}\r\n\u0026var-gpu_model=${__data.fields[\"model\"]}\r\n\u0026refresh=10s\r\n\u0026showCategory=Override%201"}]}]},{"matcher":{"id":"byName","options":"Host IP"},"properties":[{"id":"custom.width","value":120}]},{"matcher":{"id":"byName","options":"Model"},"properties":[{"id":"custom.width","value":200}]},{"matcher":{"id":"byName","options":"Hostname"},"properties":[{"id":"custom.width","value":130}]},{"matcher":{"id":"byName","options":"/root Disk Util (%)"},"properties":[{"id":"custom.cellOptions","value":{"mode":"lcd","type":"gauge","valueDisplayMode":"color"}},{"id":"thresholds","value":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"#EAB839","value":70},{"color":"orange","value":85},{"color":"red","value":90}]}},{"id":"min","value":0},{"id":"max","value":100},{"id":"custom.width","value":300},{"id":"unit","value":"percent"}]},{"matcher":{"id":"byName","options":"GPU Usage"},"properties":[{"id":"custom.width","value":120}]},{"matcher":{"id":"byName","options":"Uptime"},"properties":[{"id":"unit","value":"days"},{"id":"custom.width","value":100}]},{"matcher":{"id":"byFrameRefID","options":"joinByField-A-B-C-D-E-F-G-H-I-J"},"properties":[]}]},"gridPos":{"h":9,"w":21,"x":0,"y":0},"id":1,"options":{"cellHeight":"sm","footer":{"countRows":false,"fields":"","reducer":["sum"],"show":false},"showHeader":true,"sortBy":[]},"pluginVersion":"11.5.2","targets":[{"editorMode":"code","exemplar":false,"expr":"max by (hostname, group) (\r\n  label_replace(\r\n    slurm_group_info{group=~\"$Group\"}, \r\n    \"hostname\", \"$1\", \"node\", \"(.*)\"\r\n  )\r\n)","format":"table","instant":true,"legendFormat":"__auto","range":false,"refId":"A"},{"datasource":{"type":"prometheus","uid":"ff7s7z4vpjmyoa"},"editorMode":"code","exemplar":false,"expr":"max by (hostname, model) (\r\n  gpu_model_info \r\n  * on (instance) group_left(hostname) \r\n  label_replace(server_identity, \"hostname\", \"$1\", \"instance\", \"([^:]+).*\")\r\n)","format":"table","hide":false,"instant":true,"legendFormat":"__auto","range":false,"refId":"B"},{"datasource":{"type":"prometheus","uid":"ff7s7z4vpjmyoa"},"editorMode":"code","exemplar":false,"expr":"sum by (hostname) (\r\n  count by (hostname) (\r\n    label_replace(\r\n      gpu_utilization_percent \u003e 0, \r\n      \"hostname\", \"$1\", \"instance\", \"([^:]+).*\"\r\n    )\r\n  )\r\n)\r\nor on (hostname) (\r\n  0 * sum by (hostname) (\r\n    count by (hostname) (\r\n      label_replace(\r\n        gpu_utilization_percent, \r\n        \"hostname\", \"$1\", \"instance\", \"([^:]+).*\"\r\n      )\r\n    )\r\n  )\r\n)\r\n","format":"table","hide":false,"instant":true,"legendFormat":"__auto","range":false,"refId":"C"},{"datasource":{"type":"prometheus","uid":"ff7s7z4vpjmyoa"},"editorMode":"code","exemplar":false,"expr":"count by (hostname) (\r\n  label_replace(\r\n    gpu_utilization_percent, \r\n    \"hostname\", \"$1\", \"instance\", \"([^:]+).*\"\r\n  )\r\n)\r\n","format":"table","hide":false,"instant":true,"legendFormat":"__auto","range":false,"refId":"D"},{"datasource":{"type":"prometheus","uid":"ff7s7z4vpjmyoa"},"editorMode":"code","exemplar":false,"expr":"avg by (hostname) (\r\n  label_replace(\r\n    cpu_utilization_percent,\r\n    \"hostname\", \"$1\", \"instance\", \"([^:]+).*\"\r\n  )\r\n)","format":"table","hide":false,"instant":true,"legendFormat":"__auto","range":false,"refId":"E"},{"datasource":{"type":"prometheus","uid":"ff7s7z4vpjmyoa"},"editorMode":"code","exemplar":false,"expr":"100 *\r\n(\r\n  avg by (hostname) (\r\n    label_replace(\r\n      server_ram_used_bytes,\r\n      \"hostname\", \"$1\", \"instance\", \"([^:]+).*\"\r\n    )\r\n  )\r\n  /\r\n  avg by (hostname) (\r\n    label_replace(\r\n      server_ram_total_bytes,\r\n      \"hostname\", \"$1\", \"instance\", \"([^:]+).*\"\r\n    )\r\n  )\r\n)","format":"table","hide":false,"instant":true,"legendFormat":"__auto","range":false,"refId":"F"},{"datasource":{"type":"prometheus","uid":"ff7s7z4vpjmyoa"},"editorMode":"code","exemplar":false,"expr":"max by (hostname, ip) (\r\n  server_ip_info\r\n)","format":"table","hide":false,"instant":true,"legendFormat":"__auto","range":false,"refId":"G"},{"datasource":{"type":"prometheus","uid":"ff7s7z4vpjmyoa"},"editorMode":"code","exemplar":false,"expr":"max by (hostname) (server_disk_root_util_percent)","format":"table","hide":false,"instant":true,"legendFormat":"__auto","range":false,"refId":"H"},{"datasource":{"type":"prometheus","uid":"ff7s7z4vpjmyoa"},"editorMode":"code","exemplar":false,"expr":"server_gpu_usage_text","format":"table","hide":false,"instant":true,"legendFormat":"__auto","range":false,"refId":"I"},{"datasource":{"type":"prometheus","uid":"ff7s7z4vpjmyoa"},"editorMode":"code","exemplar":false,"expr":"server_uptime_days","format":"table","hide":false,"instant":true,"legendFormat":"__auto","range":false,"refId":"J"}],"title":"Clusters","transformations":[{"id":"joinByField","options":{"byField":"hostname","mode":"outer"}},{"id":"filterByValue","options":{"filters":[{"config":{"id":"isNotNull","options":{}},"fieldName":"group"}],"match":"any","type":"include"}},{"id":"organize","options":{"excludeByName":{"Time":true,"Time 1":true,"Time 2":true,"Time 3":true,"Time 4":true,"Time 5":true,"Time 6":true,"Time 9":true,"Value":false,"Value #A":true,"Value #B":true,"Value #C":true,"Value #D":true,"Value #F":false,"Value #G":true,"Value #H":true,"Value #I":true,"__name__":true,"group":true,"instance":true,"job":true},"includeByName":{},"indexByName":{"Time 1":4,"Time 2":6,"Time 3":8,"Time 4":11,"Time 5":13,"Time 6":15,"Time 7":17,"Time 8":19,"Time 9":21,"Value #A":5,"Value #B":7,"Value #C":10,"Value #D":12,"Value #E":14,"Value #F":16,"Value #G":18,"Value #H":20,"Value #I":25,"__name__":22,"group":3,"hostname":2,"instance":23,"ip":0,"job":24,"model":1,"usage":9},"renameByName":{"Time 6":"","Value #C":"Busy GPUs","Value #D":"Total GPUs","Value #E":"CPU Utilization (%)","Value #F":"RAM Utilization (%)","Value #H":"/root Disk Util (%)","Value #I":"","Value #J":"Uptime","group":"Group","hostname":"Hostname","ip":"Host IP","model":"Model","usage":"GPU Usage"}}}],"type":"table"},{"datasource":{"type":"prometheus","uid":"ff7s7z4vpjmyoa"},"description":"Shared /home (NFS) utilization across all servers. All nodes report the same value.","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"#EAB839","value":70},{"color":"orange","value":80},{"color":"red","value":85}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":9,"w":3,"x":21,"y":0},"id":2,"options":{"minVizHeight":75,"minVizWidth":75,"orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true,"sizing":"auto"},"pluginVersion":"11.5.2","targets":[{"editorMode":"code","expr":"max(server_disk_home_util_percent)","legendFormat":"__auto","range":true,"refId":"A"}],"title":"/home Disk Util","type":"gauge"}],"preload":false,"refresh":"15s","schemaVersion":40,"tags":[],"templating":{"list":[{"allValue":".*","allowCustomValue":false,"current":{"text":"All","value":"$__all"},"definition":"label_values(slurm_group_node_count, group)","includeAll":true,"name":"Group","options":[],"query":{"qryType":5,"query":"label_values(slurm_group_node_count, group)","refId":"PrometheusVariableQueryEditor-VariableQuery"},"refresh":1,"regex":"","sort":1,"type":"query"}]},"time":{"from":"now-5m","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","15s","30s","1m","5m","15m","30m","1h","2h","1d"]},"timezone":"browser","title":"cluster_level_table","uid":"afcbkkm8urny8e","version":61,"weekStart":""}}